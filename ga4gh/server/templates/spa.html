<!DOCTYPE html>
<html>
   <head>
      <title>Candig server</title>
      <link rel="stylesheet" type="text/css" href="https://igv.org/web/beta/igv.css">
      <link rel=stylesheet type=text/css href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">
      <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
      <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
      <script src="https://code.highcharts.com/highcharts.js"></script>
      <script src="https://code.highcharts.com/modules/drilldown.js"></script>
      <link rel=stylesheet type=text/css href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css">
      <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
      <script type="text/javascript" src="{{prepend_path}}/static/igv-2.0.0-rc3.js"></script>
      <link type="text/css" rel="stylesheet" href="{{prepend_path}}/static/dashboard.css">
   </head>
   <!-- A grey horizontal navbar that becomes vertical on small screens -->
   <nav class="navbar navbar-expand-sm bg-light">
      <!-- Links -->
      <ul class="nav nav-tabs" id="topTabs">
         <li class="active">
            <a class="nav-link" data-toggle="tab" href="#candig">Homepage</a>
         </li>
         <li>
            <a class="nav-link" data-toggle="tab" href="#gene_search">Gene search</a>
         </li>
         <li>
            <a class="nav-link" data-toggle="tab" href="#candig_patients">Patient overview</a>
         </li>
         <li>
            <a class="nav-link" onclick="logout()" href="javascript:void(0)">Log out</a>
         </li>
         <!--          A workaround to refresh the current tab, do not delete this tab with #refreshTab
            -->         
         <li>
            <a class="nav-link" data-toggle="tab" href="#refreshTab" style="display: none">refreshTab</a>
         </li>
      </ul>
      <div class="dropdown show">
         <a class="btn btn-primary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dataset:</a>
         <div class="dropdown-menu" id="dropdown-menu" aria-labelledby="dropdownMenuLink">
         </div>
      </div>
   </nav>

    <div class="alert alert-danger alert-dismissible" role="alert" id="warningMsg" style="display:none">
      <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
    </div>
   <div class="tab-content" id="tab-content">
      <div id="candig" class="tab-pane fade in active">
         <div class="container-fluid">
            <h2>Candig Dashboard</h2>
            <div>
               <div class="row" style="margin-top:50px; margin-bottom:50px">
                  <div class="col-sm-3">
                     <div class="card" style="border:solid; padding: 1rem; height: 15rem">
                        <div class="card-body">
                           <div id="queryStatus" style="max-width: 100%; height: 200px; auto;"></div>
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-3">
                     <div class="card" style="border:solid; padding: 1rem; height: 15rem">
                        <div class="card-body">
                           <div id="responseToTreatment" style="max-width: 100%; height: 200px; auto;"></div>
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-3">
                     <div class="card" style="border:solid; padding: 1rem; height: 15rem">
                        <div class="card-body">
                           <div id="hospitals" style="max-width: 100%; height: 200px; auto;"></div>
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-3">
                     <div class="card" style="border:solid; padding: 1rem; height: 15rem">
                        <div class="card-body">
                           <div id="therapeuticToResponses" style="max-width: 100%; height: 200px; auto;"></div>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="row" style="margin-top:50px; margin-bottom:50px">
                  <div class="col-sm-6">
                     <div class="card" style="border:solid; padding: 1rem; height: 30rem">
                        <div class="card-body">
                           <div id="timelineSamples"></div>
                        </div>
                     </div>
                  </div>
                  <div class="col-sm-6">
                     <div class="card" style="border:solid; padding: 1rem; height: 30rem">
                        <div class="card-body">
                           <div id="cancerTypes" style="min-width: 310px; height: 400px; auto;"></div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="gene_search" class="tab-pane fade">
         <div class="container-fluid">
            <h2 style="text-align: center; margin-bottom: 100px" class="title" id="title">CanDIG 0.07 - Gene Search Tool</h2>
            <div id="searchBox"><input type="text" id="request" name="search" placeholder="Search.."></div>
            <button id="searchBtn" class="btn btn-primary" name="submit" onclick="submit()">Submit</button>
            <div class="loader" id="loader" style="display: none"></div>
            <table id="myTable" class="table table-striped table-bordered nowrap"></table>

            <div class="container">
               <div id="readGroupSelector" class="form-inline" style="display: none; margin: 50px">
                   <div class="form-group">
                     <label for="firstRG">Select the first readGroupSet:</label>
                     <select class="form-control" id="firstRG">
                     </select>

                     <label for="secondRG">Select the second readGroupSet:</label>
                     <select class="form-control" id="secondRG">
                     </select>
                     <button class="btn btn-primary" id="confirmRG" onclick="rg_submit()">Confirm</button>
                  </div>
               </div>
            </div>
            <div id="igvSample" ></div>
         </div>
      </div>
      <div id="candig_patients" class="tab-pane fade">
         <div class="container-fluid">
            <h2 style="margin-bottom: 10px">CanDIG 0.07 - Overview of Patients</h2>
            <div class="row" style="margin-top:50px; margin-bottom:50px">
               <div class="col-sm-3">
                  <div class="card">
                     <div id="genderGraph" style="max-width: 100%; height: 250px; auto;"></div>
                  </div>
                  <div class="card">
                     <div id="provinceGraph" style="max-width: 100%; height: 250px; auto;"></div>
                  </div>
                  <div class="card">
                     <div id="raceGraph" style="max-width: 100%; height: 250px; auto;"></div>
                  </div>
               </div>
               <div class="col-sm-9">
                  <table id="mytable" class="table table-striped table-bordered nowrap"></table>
                  <table id="patientTable" class="table table-striped table-bordered nowrap"></table>
               </div>
            </div>
         </div>
      </div>
   </div>

   <script type="text/javascript">
      let datasetId;
      let finalDatasetName;
      let finalDatasetId;
      let activeTab;
      const session_id = '{{ session_id }}';
      const prepend_path = '{{prepend_path}}';
      const access = '{{ access }}';
      const refresh = '{{ refresh }}';
          
   </script>
   <script src="{{prepend_path}}/static/main.js"></script>
</html>